<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pharma Hub | Trusted Online Pharmacy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --pharma-teal: #007C7A;
      --pharma-teal-hover: #006b69;
    }
    
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    
    .card-hover {
      transition: all 0.3s ease;
    }
    
    .card-hover:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .btn-primary {
      background-color: var(--pharma-teal);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background-color: var(--pharma-teal-hover);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 124, 122, 0.2);
    }
    
    .category-btn {
      border: 1px solid #d1d5db;
      color: #374151;
      padding: 0.5rem 1.25rem;
      border-radius: 9999px;
      transition: all 0.3s ease;
      font-size: 0.875rem;
    }
    
    .category-btn:hover {
      background-color: var(--pharma-teal);
      color: #fff;
      border-color: var(--pharma-teal);
      transform: translateY(-1px);
    }
    
    .category-btn.active {
      background-color: var(--pharma-teal);
      color: white;
      border-color: var(--pharma-teal);
    }
    
    .search-bar {
      border: 1px solid #d1d5db;
      border-radius: 9999px;
      padding: 0.75rem 1.5rem;
      width: 100%;
      transition: all 0.3s ease;
      background-color: white;
    }
    
    .search-bar:focus {
      outline: none;
      border-color: var(--pharma-teal);
      box-shadow: 0 0 0 3px rgba(0,124,122,0.2);
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-800">

<!-- Header -->
<header class="bg-white border-b border-gray-100 shadow-sm">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <img src="images/logo.png" alt="Pharma Hub Logo" class="h-12">
      <div>
        <h1 class="text-xl font-bold" style="color:var(--pharma-teal)">Pharma Hub</h1>
        <p class="text-xs text-gray-500">Trusted online pharmacy — Ghana (GHS)</p>
      </div>
    </a>
    <nav class="flex items-center gap-6 text-sm">
      <a href="index.html" class="text-gray-700 hover:text-[var(--pharma-teal)] transition-colors duration-200 font-medium">Home</a>
      <a href="subscribe.html" class="text-gray-700 hover:text-[var(--pharma-teal)] transition-colors duration-200">Subscribe</a>
      <a href="cart.html" class="text-gray-700 hover:text-[var(--pharma-teal)] transition-colors duration-200 flex items-center gap-1">
        <i class="fas fa-shopping-cart"></i>
        <span>Cart</span>
      </a>
      <a href="dashboard.html" id="nav-dashboard" class="text-gray-700 hover:text-[var(--pharma-teal)] transition-colors duration-200 flex items-center gap-1">
        <i class="fas fa-user-circle"></i>
        <span>Dashboard</span>
      </a>
      <a href="login.html" id="nav-login" class="text-gray-700 hover:text-[var(--pharma-teal)] transition-colors duration-200 flex items-center gap-1">
        <i class="fas fa-sign-in-alt"></i>
        <span>Login</span>
      </a>
    </nav>
  </div>
</header>

<!-- Hero Section -->
<section class="bg-gradient-to-r from-[var(--pharma-teal)] to-teal-600 text-white py-12">
  <div class="max-w-6xl mx-auto px-4">
    <div class="flex flex-col md:flex-row items-center justify-between gap-8">
      <div class="flex-1">
        <h1 class="text-4xl font-bold mb-4">Your Health, Our Priority</h1>
        <p class="text-lg mb-6 opacity-90">Get authentic medicines delivered to your doorstep across Ghana. Trusted by thousands for quality healthcare.</p>
        <div class="flex flex-wrap gap-4">
          <div class="flex items-center gap-2">
            <i class="fas fa-shield-alt text-teal-200"></i>
            <span class="text-sm">100% Authentic Products</span>
          </div>
          <div class="flex items-center gap-2">
            <i class="fas fa-truck text-teal-200"></i>
            <span class="text-sm">Free Delivery Over GHS 100</span>
          </div>
          <div class="flex items-center gap-2">
            <i class="fas fa-headset text-teal-200"></i>
            <span class="text-sm">24/7 Customer Support</span>
          </div>
        </div>
      </div>
      <div class="flex-1 flex justify-center">
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 w-full max-w-md">
          <h3 class="text-xl font-bold mb-4">Quick Order</h3>
          <div class="space-y-4">
            <div class="flex gap-3">
              <input type="text" id="hero-search" placeholder="Search medicine..." class="flex-1 bg-white/20 border border-white/30 rounded-lg px-4 py-2 placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50">
              <button id="hero-search-btn" class="bg-white text-[var(--pharma-teal)] px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                <i class="fas fa-search"></i>
              </button>
            </div>
            <button id="upload-prescription-btn" class="w-full bg-white text-[var(--pharma-teal)] py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors flex items-center justify-center gap-2">
              <i class="fas fa-prescription"></i>
              <span>Upload Prescription</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Main Content -->
<section class="max-w-6xl mx-auto px-4 py-8">
  <!-- Welcome Banner -->
  <div id="welcome" class="bg-gradient-to-r from-teal-50 to-blue-50 rounded-2xl p-6 mb-8 border border-teal-100" style="display:none;">
    <div class="flex flex-col md:flex-row items-center justify-between">
      <div class="flex items-center gap-4 mb-4 md:mb-0">
        <div class="w-12 h-12 rounded-full bg-[var(--pharma-teal)] flex items-center justify-center">
          <i class="fas fa-user text-white"></i>
        </div>
        <div>
          <h2 id="welcome-name" class="text-xl font-semibold text-gray-900"></h2>
          <p class="text-gray-600">Welcome back — continue shopping or check your dashboard.</p>
        </div>
      </div>
      <div>
        <a href="dashboard.html" class="inline-block px-6 py-3 rounded-xl btn-primary text-white font-semibold flex items-center gap-2">
          <i class="fas fa-tachometer-alt"></i>
          <span>Go to Dashboard</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Search and Filters -->
  <div class="mb-8">
    <div class="relative mb-6">
      <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
        <i class="fas fa-search text-gray-400"></i>
      </div>
      <input id="search-bar" type="text" placeholder="Search for medicines or products..." class="search-bar pl-11" />
    </div>

    <!-- Category filters -->
    <div class="mb-6">
      <h3 class="text-sm font-medium text-gray-700 mb-3">Categories</h3>
      <div class="flex flex-wrap gap-2" id="category-filters">
        <button class="category-btn active" data-category="All">
          <i class="fas fa-th-large mr-1"></i>
          All
        </button>
        <button class="category-btn" data-category="Pain Relief">
          <i class="fas fa-head-side-mask mr-1"></i>
          Pain Relief
        </button>
        <button class="category-btn" data-category="Antibiotics">
          <i class="fas fa-bacteria mr-1"></i>
          Antibiotics
        </button>
        <button class="category-btn" data-category="Contraceptives">
          <i class="fas fa-pills mr-1"></i>
          Contraceptives
        </button>
        <button class="category-btn" data-category="Vitamins">
          <i class="fas fa-capsules mr-1"></i>
          Vitamins
        </button>
        <button class="category-btn" data-category="Baby Care">
          <i class="fas fa-baby mr-1"></i>
          Baby Care
        </button>
        <button class="category-btn" data-category="First Aid">
          <i class="fas fa-first-aid mr-1"></i>
          First Aid
        </button>
      </div>
    </div>
  </div>

  <!-- Products Grid -->
  <div id="product-grid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
</section>

<!-- Upload Prescription Modal -->
<div id="prescription-modal" class="modal">
  <div class="modal-content">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold" style="color:var(--pharma-teal)">Upload Prescription</h3>
      <button id="close-modal" class="text-gray-500 hover:text-gray-700">
        <i class="fas fa-times text-xl"></i>
      </button>
    </div>
    
    <div class="space-y-6">
      <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center">
        <i class="fas fa-file-prescription text-4xl text-gray-400 mb-4"></i>
        <p class="text-gray-600 mb-2">Upload your prescription file</p>
        <p class="text-sm text-gray-500 mb-4">Supported formats: JPG, PNG, PDF (Max 5MB)</p>
        <input type="file" id="prescription-file" accept=".jpg,.jpeg,.png,.pdf" class="hidden">
        <button id="select-file-btn" class="bg-[var(--pharma-teal)] text-white px-6 py-2 rounded-lg hover:bg-[var(--pharma-teal-hover)] transition-colors">
          Select File
        </button>
        <p id="file-name" class="text-sm text-gray-600 mt-3"></p>
      </div>
      
      <div class="bg-blue-50 rounded-xl p-4">
        <div class="flex items-start gap-3">
          <i class="fas fa-info-circle text-blue-500 mt-1"></i>
          <div>
            <p class="text-sm text-blue-800 font-medium">How it works:</p>
            <ul class="text-xs text-blue-700 mt-1 space-y-1">
              <li>• Upload a clear image or PDF of your prescription</li>
              <li>• Our pharmacists will review it within 2 hours</li>
              <li>• You'll receive a notification when approved</li>
              <li>• Then you can order your prescribed medications</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="flex gap-3">
        <button id="cancel-upload" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors">
          Cancel
        </button>
        <button id="submit-prescription" class="flex-1 bg-[var(--pharma-teal)] text-white py-3 rounded-lg hover:bg-[var(--pharma-teal-hover)] transition-colors font-semibold">
          Submit Prescription
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Features Section -->
<section class="bg-white border-t border-b border-gray-100 py-12">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-2xl font-bold text-center mb-10" style="color:var(--pharma-teal)">Why Choose Pharma Hub?</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div class="text-center">
        <div class="w-16 h-16 rounded-full bg-teal-100 flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-shield-alt text-[var(--pharma-teal)] text-xl"></i>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Authentic Medicines</h3>
        <p class="text-gray-600 text-sm">All our products are sourced directly from licensed manufacturers and distributors.</p>
      </div>
      <div class="text-center">
        <div class="w-16 h-16 rounded-full bg-teal-100 flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-truck text-[var(--pharma-teal)] text-xl"></i>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Fast Delivery</h3>
        <p class="text-gray-600 text-sm">Get your orders delivered quickly across Ghana with our reliable delivery network.</p>
      </div>
      <div class="text-center">
        <div class="w-16 h-16 rounded-full bg-teal-100 flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-headset text-[var(--pharma-teal)] text-xl"></i>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Expert Support</h3>
        <p class="text-gray-600 text-sm">Our pharmacists are available to answer your questions and provide guidance.</p>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="bg-gray-800 text-white py-12">
  <div class="max-w-6xl mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <div>
        <div class="flex items-center gap-2 mb-4">
          <img src="images/logo.png" alt="Pharma Hub Logo" class="h-8">
          <span class="font-bold text-lg">Pharma Hub</span>
        </div>
        <p class="text-gray-400 text-sm mb-4">Your trusted partner for quality healthcare products in Ghana.</p>
        <div class="flex gap-4">
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fab fa-instagram"></i>
          </a>
        </div>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Quick Links</h3>
        <ul class="space-y-2 text-sm text-gray-400">
          <li><a href="index.html" class="hover:text-white transition-colors">Home</a></li>
          <li><a href="subscribe.html" class="hover:text-white transition-colors">Subscribe</a></li>
          <li><a href="cart.html" class="hover:text-white transition-colors">Cart</a></li>
          <li><a href="dashboard.html" class="hover:text-white transition-colors">Dashboard</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Support</h3>
        <ul class="space-y-2 text-sm text-gray-400">
          <li><a href="#" class="hover:text-white transition-colors">Contact Us</a></li>
          <li><a href="#" class="hover:text-white transition-colors">FAQs</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Shipping Policy</a></li>
          <li><a href="#" class="hover:text-white transition-colors">Returns & Refunds</a></li>
        </ul>
      </div>
      <div>
        <h3 class="font-semibold mb-4">Contact Info</h3>
        <ul class="space-y-2 text-sm text-gray-400">
          <li class="flex items-center gap-2">
            <i class="fas fa-map-marker-alt text-[var(--pharma-teal)]"></i>
            <span>Accra, Ghana</span>
          </li>
          <li class="flex items-center gap-2">
            <i class="fas fa-phone text-[var(--pharma-teal)]"></i>
            <span>+233 59 688 6568</span>
          </li>
          <li class="flex items-center gap-2">
            <i class="fas fa-envelope text-[var(--pharma-teal)]"></i>
            <span>info@pharmahub.com</span>
          </li>
        </ul>
      </div>
    </div>
    <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400 text-sm">
      © <span id="year"></span> Pharma Hub — Made in Ghana
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="js/products.js"></script>
<script src="js/site.js"></script>
<script src="js/toast.js"></script>
<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  const categoryMap = {
    "panadol-extra": "Pain Relief",
    "ibuprofen-400": "Pain Relief",
    "diclofenac-gel": "Pain Relief",
    "amoxil-250": "Antibiotics",
    "augmentin-625": "Antibiotics",
    "amlodipine-5": "Antibiotics",
    "insulin-pen": "Antibiotics",
    "lydia-pill": "Contraceptives",
    "postinor-2": "Contraceptives",
    "durex-condoms": "Contraceptives",
    "vitamin-c": "Vitamins",
    "ferobin": "Vitamins",
    "wellman": "Vitamins",
    "wellwoman": "Vitamins",
    "gripe-water": "Baby Care",
    "calpol-syrup": "Baby Care",
    "savlon-antiseptic": "First Aid",
    "hydrocortisone-cream": "First Aid",
    "antacid-tablets": "First Aid"
  };

  const grid = document.getElementById('product-grid');
  const filters = document.querySelectorAll('.category-btn');
  const searchBar = document.getElementById('search-bar');
  const heroSearch = document.getElementById('hero-search');
  const heroSearchBtn = document.getElementById('hero-search-btn');

  let currentCategory = "All";
  let searchQuery = "";

  // Modal elements
  const prescriptionModal = document.getElementById('prescription-modal');
  const uploadPrescriptionBtn = document.getElementById('upload-prescription-btn');
  const closeModal = document.getElementById('close-modal');
  const cancelUpload = document.getElementById('cancel-upload');
  const selectFileBtn = document.getElementById('select-file-btn');
  const prescriptionFile = document.getElementById('prescription-file');
  const fileName = document.getElementById('file-name');
  const submitPrescription = document.getElementById('submit-prescription');

  function renderProducts() {
    grid.innerHTML = "";
    const filtered = PRODUCTS.filter(p => {
      const inCategory = currentCategory === "All" || categoryMap[p.id] === currentCategory;
      const matchesSearch = p.name.toLowerCase().includes(searchQuery) || p.description.toLowerCase().includes(searchQuery);
      return inCategory && matchesSearch;
    });

    if (filtered.length === 0) {
      grid.innerHTML = `
        <div class="col-span-full text-center py-12">
          <i class="fas fa-search text-gray-300 text-4xl mb-3"></i>
          <p class="text-gray-500 text-lg">No products found.</p>
          <p class="text-gray-400 text-sm mt-1">Try adjusting your search or filter criteria.</p>
        </div>
      `;
      return;
    }

    filtered.forEach(p => {
      const card = document.createElement('div');
      card.className = "bg-white rounded-xl shadow-sm border border-gray-100 p-5 flex flex-col card-hover fade-in";
      card.innerHTML = `
        <a href="product.html?id=${p.id}" class="flex-1">
          <div class="flex items-center justify-center mb-4 bg-gray-50 rounded-lg h-48">
            <img src="${p.image}" alt="${p.name}" class="h-40 object-contain">
          </div>
          <h3 class="font-semibold text-gray-900 mb-2">${p.name}</h3>
          <p class="text-sm text-gray-500 mb-3">${p.description.slice(0, 70)}...</p>
          <div class="flex justify-between items-center mt-auto">
            <p class="text-lg font-bold" style="color:var(--pharma-teal)">GHS ${p.price.toFixed(2)}</p>
            <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${categoryMap[p.id] || 'General'}</span>
          </div>
        </a>
        <button class="btn-primary mt-4 w-full py-3 rounded-lg text-white font-medium flex items-center justify-center gap-2 add-cart">
          <i class="fas fa-cart-plus"></i>
          <span>Add to Cart</span>
        </button>
      `;
      card.querySelector(".add-cart").addEventListener("click", () => {
        const cart = JSON.parse(localStorage.getItem("cart") || "[]");
        const existing = cart.find(i => i.id === p.id);
        if (existing) existing.qty += 1;
        else cart.push({ id: p.id, name: p.name, price: p.price, image: p.image, qty: 1 });
        localStorage.setItem("cart", JSON.stringify(cart));
        showToast("Added to cart", "success");
      });
      grid.appendChild(card);
    });
  }

  // Filter logic
  filters.forEach(btn => {
    btn.addEventListener("click", () => {
      filters.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      currentCategory = btn.dataset.category;
      renderProducts();
    });
  });

  // Search logic
  searchBar.addEventListener("input", e => {
    searchQuery = e.target.value.toLowerCase();
    renderProducts();
  });

  // Hero search functionality
  heroSearchBtn.addEventListener("click", () => {
    searchQuery = heroSearch.value.toLowerCase();
    searchBar.value = heroSearch.value;
    renderProducts();
  });

  heroSearch.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      searchQuery = heroSearch.value.toLowerCase();
      searchBar.value = heroSearch.value;
      renderProducts();
    }
  });

  // Prescription upload functionality
  uploadPrescriptionBtn.addEventListener("click", () => {
    prescriptionModal.style.display = "flex";
  });

  closeModal.addEventListener("click", () => {
    prescriptionModal.style.display = "none";
    resetFileInput();
  });

  cancelUpload.addEventListener("click", () => {
    prescriptionModal.style.display = "none";
    resetFileInput();
  });

  selectFileBtn.addEventListener("click", () => {
    prescriptionFile.click();
  });

  prescriptionFile.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (file) {
      if (file.size > 5 * 1024 * 1024) {
        showToast("File size exceeds 5MB limit", "error");
        resetFileInput();
        return;
      }
      fileName.textContent = `Selected: ${file.name}`;
      fileName.style.color = "var(--pharma-teal)";
    }
  });

  submitPrescription.addEventListener("click", () => {
    const file = prescriptionFile.files[0];
    if (!file) {
      showToast("Please select a file first", "error");
      return;
    }

    // Simulate file upload
    showToast("Prescription uploaded successfully! Our pharmacists will review it shortly.", "success");
    prescriptionModal.style.display = "none";
    resetFileInput();

    // Save prescription to user data if logged in
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.email) {
      const userKey = `userData_${currentUser.email || currentUser.uid}`;
      const userData = JSON.parse(localStorage.getItem(userKey) || '{}');
      
      if (!userData.prescriptions) userData.prescriptions = [];
      
      userData.prescriptions.push({
        id: 'RX' + Date.now(),
        doctor: 'Dr. Online Consultation',
        date: new Date().toISOString(),
        medications: ['Prescription Review'],
        status: 'Pending Review',
        fileName: file.name,
        uploadDate: new Date().toISOString()
      });
      
      localStorage.setItem(userKey, JSON.stringify(userData));
    }
  });

  function resetFileInput() {
    prescriptionFile.value = "";
    fileName.textContent = "";
  }

  // Close modal when clicking outside
  window.addEventListener("click", (e) => {
    if (e.target === prescriptionModal) {
      prescriptionModal.style.display = "none";
      resetFileInput();
    }
  });

  // Check if user is logged in
  function checkUserStatus() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.email) {
      document.getElementById('welcome').style.display = 'block';
      document.getElementById('welcome-name').textContent = `Hi, ${currentUser.name || 'there'}!`;
      document.getElementById('nav-dashboard').style.display = 'flex';
      document.getElementById('nav-login').style.display = 'none';
    } else {
      document.getElementById('welcome').style.display = 'none';
      document.getElementById('nav-dashboard').style.display = 'none';
      document.getElementById('nav-login').style.display = 'flex';
    }
  }

  // Initialize
  checkUserStatus();
  renderProducts();
</script>

</body>
</html>